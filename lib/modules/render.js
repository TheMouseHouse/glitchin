'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.Render=Render;var _lodash=require('lodash'),_bluebird=require('bluebird');function Render(a,b){console.log('Rendering...');var c=0,d=a.bitmap.data,e=null;return(0,_lodash.has)(a,'glitch')&&(e=a.glitch.data),(0,_lodash.isNull)(e)||(0,_lodash.each)(e,function(f){d[c]=f.r,d[c+1]=f.g,d[c+2]=f.b,d[c+3]=f.a,c+=4}),'base64'===b?new _bluebird.Promise(function(f,g){((0,_lodash.isUndefined)(a)||(0,_lodash.isNull)(a))&&g(),a.getBuffer(a.bitmap.mime,function(h,i){(0,_lodash.isNull)(h)?f(i.toString('base64')):f(h),i=null,a=null,d=null})}).catch(function(){return console.error}):void a.write(b)}