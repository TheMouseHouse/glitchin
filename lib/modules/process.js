'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.Process=Process;var _lodash=require('lodash'),_bluebird=require('bluebird'),_pixel=require('./pixel');function Process(a){return new _bluebird.Promise(function(b,c){((0,_lodash.isUndefined)(a)||(0,_lodash.isNull)(a))&&c();var d=a.bitmap.data,e=a.bitmap.width,f=a.bitmap.height,g={image:a,data:[],rows:[],columns:[],width:e,height:f};a.scan(0,0,e,f,function(h,i,j){var k=new _pixel.Pixel(h,i,j,d);g.data.push(k),(0,_lodash.isUndefined)(g.rows[i])&&(g.rows[i]=[]),(0,_lodash.isUndefined)(g.columns[h])&&(g.columns[h]=[]),g.rows[i].push(k),g.columns[h].push(k)}),a.glitch=g,b(a)}).catch(function(){return console.error})}