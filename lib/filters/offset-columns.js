'use strict';var _=require('lodash'),Const=require('../config/constants'),Utils=require('../modules/utils'),OffsetInColumn=require('../modules/offset-in-column'),debug=require('debug')('filter/offset-columns');module.exports=function(a,b){Utils.check.image(a,'Offset Columns'),Utils.hasRgbParameter(b,a.bitmap.height)||(b=Utils.createRgbParameters()),debug('Offsetting columns...');try{Utils.defineChannels(a),_.each(b,function(c,d){_.set(a[Const.CHANNELS],d,Utils.mapChannel(a.glitch.columns,d)),_.includes(Const.POSSIBLE_CHANNELS,d)&&(a=OffsetInColumn(a,d,c))}),Utils.deleteChannels(a)}catch(c){debug('Error offsetting columns. Attempting to continue. '+c)}return a};