'use strict';var _=require('lodash'),Const=require('../config/constants'),Utils=require('../modules/utils'),OffsetInRow=require('../modules/offset-in-row'),debug=require('debug')('filter/offset-rows');module.exports=function(a,b){Utils.check.image(a,'Offset Rows');var c={};_.isFunction(b)||(Utils.hasRgbParameter(b,a.bitmap.width)?c=b:c=Utils.createRgbParameters()),debug('info','Offsetting rows...');try{Utils.defineChannels(a),_.isFunction(b)||_.each(c,function(d,f){_.set(a[Const.CHANNELS],f,Utils.mapChannel(a.glitch.rows,f)),_.includes(Const.POSSIBLE_CHANNELS,f)&&(a=OffsetInRow(a,f,d))}),Utils.deleteChannels(a)}catch(d){debug('Error offsetting rows. Attempting to continue. '+d)}return a};